{% extends 'base.html.twig' %}

{% block title %}SgrEvento index{% endblock %}

{% block body %}
	<div class="row">
		<p>Información, navegación y configuración</p>
	</div>
	
	<div class="row">
	<div class="col">
		
	<table class="table table-striped table-bordered table-sm">
		<caption>Cuadrante de ocupación</caption>
		<thead class="thead-dark">
			<tr>
				<th scope="col" class="h"><div class="col">Hora</div></th>
				
				{% for espacio in sgr_espacios %}
					<th scope="col" width="40px">
						<div class="col">{{ espacio[0].nombre }}</div>
					</th>
				{% endfor %}
				
			</tr>
		</thead>
		<tbody>
							
			
			{% set start_h = constant('\\App\\Entity\\SgrEvento::H_INICIO_MIN') | date('U') %}
			{% set end_h = constant('\\App\\Entity\\SgrEvento::H_FIN_MAX') | date('U') %}
			 
			{% for hour in range(start_h,end_h,30*60) %}
			<tr>

				<th scope="row">
					<div class="col">{{ hour|date('H:i')}}</div>
				</th>
				{% for espacio in sgr_espacios %}
					<td>
						<div class="e" style="position: relative;">
							{% if not espacio['rangos'] is empty %}
								{% for rango in espacio['rangos'] %}
									{% if hour == rango.hi %}
										<div style="max-height: {{ (rango.numSteps + 1) * 34 }}px;height: {{ (rango.numSteps + 1) * 34 }}px;position:absolute;top:{{hour / 60}};background-color: #999;max-width: 100% ">
										
											<span style="">Aquí va el título del evento..</span>
										{#dump(espacio[0])#}
										
										</div>
									{% endif %}
								{% endfor %}
							{% endif %}
							
						</div>
						
					</td>
				{% endfor %}
			</tr>
			{% endfor %}
		</tbody>
	</table>
	</div><!-- /.col -->
	</div><!-- /.row -->

{% endblock %}
{# composer req twig/intl-extra #}